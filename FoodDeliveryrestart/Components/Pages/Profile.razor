@page "/profile"
@inject NavigationManager Nav
@inject FoodDeliveryrestart.Services.AuthState Auth

@if (!Auth.IsLoggedIn)
{
    <p style="padding:24px;">Redirecting to login...</p>
}
else
{
    <div style="padding:24px; max-width:900px; margin:0 auto;">
        <h2 style="font-weight:900;">My Profile</h2>
        <p>Logged in as: <b>@Auth.Email</b></p>

        <button class="auth-btn" @onclick="Logout" style="max-width:220px;">
            Logout
        </button>
    </div>
}

@code {
    protected override void OnInitialized()
    {
        if (!Auth.IsLoggedIn)
        {
            Nav.NavigateTo("/login", true);
        }
    }

    private void Logout()
    {
        Auth.Logout();
        Nav.NavigateTo("/");
    }
}
