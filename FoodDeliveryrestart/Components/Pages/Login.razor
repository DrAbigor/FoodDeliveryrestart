@page "/login"
@inject NavigationManager Nav
@inject FoodDeliveryrestart.Services.AuthState Auth

<div class="auth-page">
    <div class="auth-card">
        <h2 class="auth-title">Login</h2>
        <p class="auth-sub">Welcome back! Please sign in.</p>

        <label class="auth-label">Email</label>
        <input class="auth-input" @bind="Email" placeholder="name@email.com" />

        <label class="auth-label">Password</label>
        <input class="auth-input" type="password" @bind="Password" placeholder="••••••••" />

        @if (!string.IsNullOrWhiteSpace(Error))
        {
            <div class="auth-error">@Error</div>
        }

        <button class="auth-btn" @onclick="DoLogin">Login</button>

        <div class="auth-footer">
            Don’t have an account?
            <a class="auth-link" href="/register">Register</a>
        </div>
    </div>
</div>

@code {
    private string Email = "";
    private string Password = "";
    private string Error = "";

    private void DoLogin()
    {
        Error = "";

        if (string.IsNullOrWhiteSpace(Email) || string.IsNullOrWhiteSpace(Password))
        {
            Error = "Please enter email and password.";
            return;
        }

        // UI-only login (no DB)
        Auth.Login(Email.Trim());
        Nav.NavigateTo("/profile");
    }
}
